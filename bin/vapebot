#!/usr/bin/env ruby

require 'colorize'

begin
  require 'vapebot'

  if (File.exists? "bin/vapebot.pid") && (flags.empty?)
    abort "Bot instance already running!"
  end

  if (bot = Bot.new)
    puts "Affirmative, Dave. I read you.".green
    puts "---"
    File.new("bin/vapebot.pid", "w+").write(Process.pid)
    bot.run
  end
rescue LoadError => e
  puts "He's dead, Jim!".red
  puts "Just a moment, Captain, sir. I'll explain what happened:".magenta
  puts "---"
  puts e.message.yellow
  puts "---"
end
